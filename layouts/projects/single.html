
{{ define "main" }}
    {{- partial "header.html" . }}
    <div class="page page--without-padding bg-blue">
        <div class="page__background"></div>
        <div class="project">
            <div class="project__nav project__nav--next">
                    {{ if .NextPage }}
                    {{ if eq .NextPage.Section "projects" }}
                    <a class="project__nav__link nav-link" href="{{ .NextPage.Permalink }}">
                        {{ readFile "static/images/nav-arrow.svg" | safeHTML }}
                    </a>
                    {{ end }}
                {{ end }}
            </div>
            
            <div class="project__nav project__nav--previous">
                    {{ if .PrevPage }}
                    {{ if eq .PrevPage.Section "projects" }}
                    <a class="project__nav__link nav-link" href="{{ .PrevPage.Permalink }}"> 
                        {{ readFile "static/images/nav-arrow.svg" | safeHTML }}
                    </a>
                    {{ end }}
                {{ end }}
            </div>
            <div class="project__hero">
                <div class="project__hero__content">
                    {{ partial "background-image" . }}

                    <div class="project__hero__content__text">
                        <h5 class="project__hero__content__text__sub-title">
                            <a class="nav-link" href="{{ .Site.BaseURL }}projects">projects</a> Â·
                            {{ with .Params.tags }}
                                {{ range . }}
                                    {{ $href := print (absURL "tags/") (urlize .) }}
                                    {{ . }}
                                {{ end }}
                            {{ end }}
                        </h5>
                        <h1 class="project__hero__content__text__title">
                            {{ $test := split .Title " "}}
                            {{range $test }}
                              <span class="word">
                                <span class="word__content">
                                  {{.}}
                                </span>
                              </span>
                            {{end}}
                        </h1>
                        <div class="project__hero__content__text__tags">
                            {{ with .Params.roles }}
                            {{ range . }}
                                <span class="tag">{{ . }}</span>
                            {{ end }}
                            {{ end }}
                        </div>
                    </div>

                    <!-- <span class="project__hero__content__date">{{ .PublishDate.Format "2006" }}</span> -->
                </div>

            </div>
            <div class="container project__container">
                {{with .Params.center }}
                {{ end }}
                {{ .Content }}
            </div>
        </div>
        {{- partial "footer.html" . -}}
    </div>
    <script>

            $(function () {
                $(document).ready(function(){
                    $(window).scrollTop(0);
                });

                anime.set(".word__content", {
                translateY: "+=130px",
                });

                anime.set(".project__hero__content__text__sub-title", {
                translateY: "+=25px",
                opacity:0
                });


                anime.set(".project__hero__content__image", {
                translateY: "+=25px",
                opacity:0
                });


                anime.set(".tag, .project__container, .project__hero__content__text__date", {
                translateY: "+=25px",
                opacity:0
                });


                var timeline = anime.timeline({
                loop: false,
                duration: 400,
                });

                var animation = timeline
                .add({
                    targets: ".project__hero__content__image",
                    translateY: "-=25px",
                    opacity: 1,
                    easing: "easeOutQuart",
                }, "+=200")
                .add({
                    targets: ".project__hero__content__text__sub-title",
                    translateY: "-=25px",
                    opacity: 1,
                    easing: "easeOutQuart",
                }, "-=200")
                .add({
                    targets: ".word__content",
                    translateY: "-=130px",
                    easing: "easeOutQuart",
                    delay: anime.stagger(50),
                }, "-=200")
                .add({
                    targets: ".tag",
                    translateY: "-=25px",
                    opacity:1,
                    easing: "easeOutQuart",
                    delay: anime.stagger(50),
                }, "-=200")
                .add({
                    targets: ".project__container",
                    translateY: "-=25px",
                    opacity:1,
                    easing: "easeOutQuart",
                    delay: anime.stagger(50),
                }, "-=200")



            });


        var convertRange = function (value, r1, r2, rounded = true) {
            value = ((value - r1[0]) * (r2[1] - r2[0])) / (r1[1] - r1[0]) + r2[0];
            if (rounded) {
                return Math.round(value);
            } else {
                return Math.round(value * 10) / 10;
            }
        };
        
        // $(".project__hero__content__date").fitText();
 
        var computeBackgroundParallax = function() {
            
            const offset = ($(window).scrollTop() / 4).toFixed(0);
            const contentOffset = -($(window).scrollTop() / 6).toFixed(0);
            const realContentOffset = contentOffset < -60 ? -60 : contentOffset;

            
            // $(".shape-container").css({
            //     "transform": "translate3d(0," + realContentOffset + "px, 0)"
            // });

        }
        
        $(window).on("scroll", function(){
            computeBackgroundParallax();
        });

        computeBackgroundParallax();

    </script>

{{ end }}