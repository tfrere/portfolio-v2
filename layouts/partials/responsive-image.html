{{ $image := .image }}


<!-- variables used for img tag -->
{{ $imgSrc := "" }}
{{ $imgSrcSet := slice }}

<!-- uses settings from config.toml depending on orientation -->
{{ $widths := $.Site.Params.landscapePhotoWidths }}
{{ if gt $image.Height $image.Width }}
  {{ $widths = $.Site.Params.portraitPhotoWidths }}
{{ end }}

<!--
  Add URL for each width to $imgSrcSet variable
  format: "/path/img_1000.jpg 1000w,/path/img_500.jpg 500w"
  Note: the first URL is used as "fallback" src in $imgSrc.
-->
{{ range $widths }}
  {{ $srcUrl := (printf "%dx" . | $image.Resize).RelPermalink }}
  {{ if eq $imgSrc "" }}
        {{ $imgSrc = $srcUrl }}
    {{ end }}
  {{ $imgSrcSet = $imgSrcSet | append (printf "%s %dw" $srcUrl .) }}
{{ end }}

{{ $imgSrcSet = (delimit $imgSrcSet ",") }}

<!-- Format additional HTML attributes -->
{{ $attributes := slice }}
{{ range $name, $value := .attrs }}
  {{ $attributes = $attributes | append (printf "%s=%q" $name $value) }}
  {{ end }}
{{ $attributes = (delimit $attributes " ") }}


{{ $width := float $image.Width }}
{{ $height := float $image.Height }}
{{ $division := div $height $width }}
{{ $padding := mul $division 100 }}

{{ $test := $image.Resize "1600x 80q" }}

<div class="responsive-image" style=" padding-bottom:{{ print $padding }}%;">
  <!-- <a  data-cursor-text="+"  data-cursor="-lg" class="img-fluidbox" href="{{ $test.RelPermalink }}"> -->
    <img class="responsive-image__content" alt="{{$image.Title}}" data-lazy src="{{ $imgSrc }}" srcset="{{ $imgSrcSet }}" {{ print $attributes | safeHTMLAttr }}>
  <!-- </a> -->
</div>